<!doctype html>
<html class="docs-version-current" lang="zh" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<title data-react-helmet="true">troubleshooting | 𝑪𝑲𝒊𝒃𝒂𝒏𝒂</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="http://CKibana.inf.17usoft.com/docs//ckibana-docs/zh/troubleshooting"><meta data-react-helmet="true" name="docusaurus_locale" content="zh"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="troubleshooting | 𝑪𝑲𝒊𝒃𝒂𝒏𝒂"><meta data-react-helmet="true" name="description" content="1、CKibana启动成功且没报错，但是访问kibana出现如下错误"><meta data-react-helmet="true" property="og:description" content="1、CKibana启动成功且没报错，但是访问kibana出现如下错误"><link data-react-helmet="true" rel="shortcut icon" href="/ckibana-docs/img/logo.svg"><link data-react-helmet="true" rel="canonical" href="http://CKibana.inf.17usoft.com/docs//ckibana-docs/zh/troubleshooting"><link data-react-helmet="true" rel="alternate" href="http://CKibana.inf.17usoft.com/docs//ckibana-docs/zh/troubleshooting" hreflang="en"><link data-react-helmet="true" rel="alternate" href="http://CKibana.inf.17usoft.com/docs//ckibana-docs/zh/zh/troubleshooting" hreflang="zh"><link data-react-helmet="true" rel="alternate" href="http://CKibana.inf.17usoft.com/docs//ckibana-docs/zh/troubleshooting" hreflang="x-default"><link rel="stylesheet" href="/ckibana-docs/assets/css/styles.b28777c2.css">
<link rel="preload" href="/ckibana-docs/assets/js/runtime~main.90e7a7aa.js" as="script">
<link rel="preload" href="/ckibana-docs/assets/js/main.306585b1.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/ckibana-docs/"><div class="navbar__logo"><img src="/ckibana-docs/img/ckibana-new.svg" alt="Site Logo" class="themedImage_TMUO themedImage--light_4Vu1" height="32" width="32"><img src="/ckibana-docs/img/ckibana-new.svg" alt="Site Logo" class="themedImage_TMUO themedImage--dark_uzRr" height="32" width="32"></div><b class="navbar__title">𝑪𝑲𝒊𝒃𝒂𝒏𝒂</b></a></div><div class="navbar__items navbar__items--right"><div class="navbar__search searchBarContainer_I7kZ"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_Zg7X searchBarLoadingRing_J5Ez"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_CDc6"><kbd class="searchHint_2RRg">ctrl</kbd><kbd class="searchHint_2RRg">K</kbd></div></div><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">🌜</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">🌞</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ckibana-docs/zh/UserCase">usercase</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ckibana-docs/zh/api-docs">api-docs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/ckibana-docs/zh/troubleshooting">troubleshooting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ckibana-docs/zh/">简介</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div style="position:relative" class="col docItemCol_MGa7"><div style="width:100%"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_psec"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>troubleshooting</h1></header><h2 class="anchor anchorWithStickyNavbar_y2LR" id="1ckibana启动成功且没报错但是访问kibana出现如下错误">1、CKibana启动成功且没报错，但是访问kibana出现如下错误<a aria-hidden="true" class="hash-link" href="#1ckibana启动成功且没报错但是访问kibana出现如下错误" title="Direct link to heading">​</a></h2><p><img src="/ckibana-docs/assets/images/img02-866ea913c621c0783cbccec13fa22125.png"></p><p>报此错误大概率是初始化的配置不正常</p><p><strong>1）检查配置的元数据集群是否正确</strong></p><p><strong>2）检查kibana配置的elasticsearchHosts参数，代理地址是否正确，能否访问出现如下信息，有如下信息才表示代理配置正常</strong></p><p><img src="/ckibana-docs/assets/images/img03-9a602c7078790aa3b2503dbe6f810cb3.png"></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="2创建不了index-pattern">2、创建不了index pattern<a aria-hidden="true" class="hash-link" href="#2创建不了index-pattern" title="Direct link to heading">​</a></h2><p>如图，红框处在创建index pattern的时候，如果没有选项可以创建index pattern，正常indices数量是大于0的</p><p><img src="/ckibana-docs/assets/images/img01-aa99af9a331d76742dd18077e7ec3ae6.png"></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="排查步骤如下">排查步骤如下<a aria-hidden="true" class="hash-link" href="#排查步骤如下" title="Direct link to heading">​</a></h3><p><strong>1）首先确定输入的index pattern跟ck表是否一致，index pattern跟跟ck表名是精确匹配</strong></p><p><strong>2）检查ck配置是否正常</strong></p><p><strong>3）使用日志中输出的sql，在ck中是否能查询到对应表</strong></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="3创建index-pattern时候选不了时间字段">3、创建index pattern时候，选不了时间字段<a aria-hidden="true" class="hash-link" href="#3创建index-pattern时候选不了时间字段" title="Direct link to heading">​</a></h2><p>匹配时间字段的逻辑是：</p><p><strong>1）字段为Date类型，比如DateTime64类型，会被认为是时间类型</strong></p><p><strong>2）或者字段名中包含time，比如（<code>@timestamp</code> UInt64），会被认为是时间类型</strong></p><p>这两种情况下满足任意一个，字段都会被认为是时间字段，如果选择不了时间字段，需要检查下ck表中字段是否符合匹配逻辑</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="4查不出来数据">4、查不出来数据<a aria-hidden="true" class="hash-link" href="#4查不出来数据" title="Direct link to heading">​</a></h2><p>打开f12,可以看到响应的里面有sql,可以看到具体的执行sql
<img src="/ckibana-docs/assets/images/troubleshooting01-978f5c98da7d4607eb4ac57d4e4fab15.png"></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="5clickhouse-cpu占用过高">5、ClickHouse cpu占用过高<a aria-hidden="true" class="hash-link" href="#5clickhouse-cpu占用过高" title="Direct link to heading">​</a></h2><p>可以基于ClickHouse的<code>system.query_log</code> 来做具体分析,重点关注<code>read_rows</code>跟<code>read_bytes</code>2个指标
处理方案包括:</p><p>**1）找到对应sql加入CKibana黑名单</p><p>**2）调整对应的图表</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://git.17usoft.com/tech_inf/es2ck-kibana-proxy-doc/tree/master/docs/zh/troubleshooting.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg style="display:inline-block;width:16px;margin:10px 5px -2px 0" width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.75 0C4.19409 0 0.5 3.675 0.5 8.20357C0.5 11.8286 2.86451 14.9 6.14241 15.9857C6.19397 15.9964 6.23817 16 6.28237 16C6.58806 16 6.70592 15.7821 6.70592 15.5929C6.70592 15.3964 6.69855 14.8821 6.69487 14.1964C6.38549 14.2643 6.10926 14.2929 5.8625 14.2929C4.27511 14.2929 3.91417 13.0964 3.91417 13.0964C3.5385 12.15 2.9971 11.8964 2.9971 11.8964C2.27891 11.4071 2.99342 11.3929 3.04866 11.3929H3.05234C3.88103 11.4643 4.31563 12.2429 4.31563 12.2429C4.72813 12.9429 5.28058 13.1393 5.77411 13.1393C6.16083 13.1393 6.51071 13.0179 6.71696 12.925C6.79063 12.3964 7.00424 12.0357 7.23996 11.8286C5.40949 11.6214 3.48326 10.9179 3.48326 7.775C3.48326 6.87857 3.80368 6.14643 4.33036 5.575C4.24565 5.36786 3.96205 4.53214 4.41138 3.40357C4.41138 3.40357 4.47031 3.38571 4.59554 3.38571C4.89386 3.38571 5.56786 3.49643 6.68013 4.24643C7.3394 4.06429 8.04286 3.975 8.74632 3.97143C9.44609 3.975 10.1532 4.06429 10.8125 4.24643C11.9248 3.49643 12.5988 3.38571 12.8971 3.38571C13.0223 3.38571 13.0813 3.40357 13.0813 3.40357C13.5306 4.53214 13.247 5.36786 13.1623 5.575C13.689 6.15 14.0094 6.88214 14.0094 7.775C14.0094 10.925 12.0795 11.6179 10.2416 11.8214C10.5363 12.075 10.8015 12.575 10.8015 13.3393C10.8015 14.4357 10.7904 15.3214 10.7904 15.5893C10.7904 15.7821 10.9046 16 11.2103 16C11.2545 16 11.306 15.9964 11.3576 15.9857C14.6392 14.9 17 11.825 17 8.20357C17 3.675 13.3059 0 8.75 0Z" fill="#92A0B3"></path></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/ckibana-docs/zh/api-docs"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« <!-- -->api-docs</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/ckibana-docs/zh/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">简介<!-- --> »</div></a></div></nav></div></div><div class="end"><div class="toc-wrapper" style="padding-inline-end:1rem;padding-inline-start:1rem"><h2>Contents</h2><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1ckibana启动成功且没报错但是访问kibana出现如下错误" class="table-of-contents__link toc-highlight">1、CKibana启动成功且没报错，但是访问kibana出现如下错误</a></li><li><a href="#2创建不了index-pattern" class="table-of-contents__link toc-highlight">2、创建不了index pattern</a><ul><li><a href="#排查步骤如下" class="table-of-contents__link toc-highlight">排查步骤如下</a></li></ul></li><li><a href="#3创建index-pattern时候选不了时间字段" class="table-of-contents__link toc-highlight">3、创建index pattern时候，选不了时间字段</a></li><li><a href="#4查不出来数据" class="table-of-contents__link toc-highlight">4、查不出来数据</a></li><li><a href="#5clickhouse-cpu占用过高" class="table-of-contents__link toc-highlight">5、ClickHouse cpu占用过高</a></li></ul></div><a href="https://git.17usoft.com/tech_inf/es2ck-kibana-proxy-doc/tree/master/docs/zh/troubleshooting.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg style="display:inline-block;width:16px;margin:10px 5px -2px 0" width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.75 0C4.19409 0 0.5 3.675 0.5 8.20357C0.5 11.8286 2.86451 14.9 6.14241 15.9857C6.19397 15.9964 6.23817 16 6.28237 16C6.58806 16 6.70592 15.7821 6.70592 15.5929C6.70592 15.3964 6.69855 14.8821 6.69487 14.1964C6.38549 14.2643 6.10926 14.2929 5.8625 14.2929C4.27511 14.2929 3.91417 13.0964 3.91417 13.0964C3.5385 12.15 2.9971 11.8964 2.9971 11.8964C2.27891 11.4071 2.99342 11.3929 3.04866 11.3929H3.05234C3.88103 11.4643 4.31563 12.2429 4.31563 12.2429C4.72813 12.9429 5.28058 13.1393 5.77411 13.1393C6.16083 13.1393 6.51071 13.0179 6.71696 12.925C6.79063 12.3964 7.00424 12.0357 7.23996 11.8286C5.40949 11.6214 3.48326 10.9179 3.48326 7.775C3.48326 6.87857 3.80368 6.14643 4.33036 5.575C4.24565 5.36786 3.96205 4.53214 4.41138 3.40357C4.41138 3.40357 4.47031 3.38571 4.59554 3.38571C4.89386 3.38571 5.56786 3.49643 6.68013 4.24643C7.3394 4.06429 8.04286 3.975 8.74632 3.97143C9.44609 3.975 10.1532 4.06429 10.8125 4.24643C11.9248 3.49643 12.5988 3.38571 12.8971 3.38571C13.0223 3.38571 13.0813 3.40357 13.0813 3.40357C13.5306 4.53214 13.247 5.36786 13.1623 5.575C13.689 6.15 14.0094 6.88214 14.0094 7.775C14.0094 10.925 12.0795 11.6179 10.2416 11.8214C10.5363 12.075 10.8015 12.575 10.8015 13.3393C10.8015 14.4357 10.7904 15.3214 10.7904 15.5893C10.7904 15.7821 10.9046 16 11.2103 16C11.2545 16 11.306 15.9964 11.3576 15.9857C14.6392 14.9 17 11.825 17 8.20357C17 3.675 13.3059 0 8.75 0Z" fill="#92A0B3"></path></svg>Edit this page</a></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/TongchengOpenSource/ckibana/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Github Issues<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://ckibana.inf.17usoft.com/docs/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>CKibana Community Forums<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/TongchengOpenSource/ckibana" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 TongchengOpenSource</div></div></div></footer></div>
<script src="/ckibana-docs/assets/js/runtime~main.90e7a7aa.js"></script>
<script src="/ckibana-docs/assets/js/main.306585b1.js"></script>
</body>
</html>