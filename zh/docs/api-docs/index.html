<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/ckibana-docs/en/blog/rss.xml" title="ğ‘ªğ‘²ğ’Šğ’ƒğ’‚ğ’ğ’‚ RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/ckibana-docs/en/blog/atom.xml" title="ğ‘ªğ‘²ğ’Šğ’ƒğ’‚ğ’ğ’‚ Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/ckibana-docs/zh/blog/rss.xml" title="ğ‘ªğ‘²ğ’Šğ’ƒğ’‚ğ’ğ’‚ RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/ckibana-docs/zh/blog/atom.xml" title="ğ‘ªğ‘²ğ’Šğ’ƒğ’‚ğ’ğ’‚ Atom Feed"><title data-react-helmet="true">api-docs | ğ‘ªğ‘²ğ’Šğ’ƒğ’‚ğ’ğ’‚</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="http://CKibana.inf.17usoft.com/docs//ckibana-docs/zh/docs/api-docs"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="api-docs | ğ‘ªğ‘²ğ’Šğ’ƒğ’‚ğ’ğ’‚"><meta data-react-helmet="true" name="description" content="applicationæ–‡ä»¶"><meta data-react-helmet="true" property="og:description" content="applicationæ–‡ä»¶"><link data-react-helmet="true" rel="icon" href="/ckibana-docs/img/logo.svg"><link data-react-helmet="true" rel="canonical" href="http://CKibana.inf.17usoft.com/docs//ckibana-docs/zh/docs/api-docs"><link data-react-helmet="true" rel="alternate" href="http://CKibana.inf.17usoft.com/docs//ckibana-docs/zh/docs/api-docs" hreflang="en"><link data-react-helmet="true" rel="alternate" href="http://CKibana.inf.17usoft.com/docs//ckibana-docs/zh/docs/api-docs" hreflang="x-default"><link rel="stylesheet" href="/ckibana-docs/assets/css/styles.56a1642d.css">
<link rel="preload" href="/ckibana-docs/assets/js/runtime~main.8602d1de.js" as="script">
<link rel="preload" href="/ckibana-docs/assets/js/main.ba6bb3d8.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/ckibana-docs/"><div class="navbar__logo"><img src="/ckibana-docs/img/ckibana-new.svg" alt="Site Logo" class="themedImage_TMUO themedImage--light_4Vu1" height="32" width="32"><img src="/ckibana-docs/img/ckibana-new.svg" alt="Site Logo" class="themedImage_TMUO themedImage--dark_uzRr" height="32" width="32"></div><b class="navbar__title">ğ‘ªğ‘²ğ’Šğ’ƒğ’‚ğ’ğ’‚</b></a></div><div class="navbar__items navbar__items--right"><div class="navbar__search searchBarContainer_I7kZ"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_Zg7X searchBarLoadingRing_J5Ez"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_CDc6"><kbd class="searchHint_2RRg">ctrl</kbd><kbd class="searchHint_2RRg">K</kbd></div></div><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ğŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ğŸŒ</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ckibana-docs/zh/docs/UserCase">usercase</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/ckibana-docs/zh/docs/api-docs">api-docs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ckibana-docs/zh/docs/troubleshooting">troubleshooting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ckibana-docs/zh/docs/">ç®€ä»‹</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div style="position:relative" class="col docItemCol_MGa7"><div style="width:100%"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_psec"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>api-docs</h1></header><h2 class="anchor anchorWithStickyNavbar_y2LR" id="applicationæ–‡ä»¶">applicationæ–‡ä»¶<a class="hash-link" href="#applicationæ–‡ä»¶" title="Direct link to heading">â€‹</a></h2><p>è¯¥æ–‡ä»¶æ˜¯ä¸€äº›åŸºæœ¬é…ç½®ï¼Œç«¯å£ã€æ—¥å¿—ç­‰ï¼Œæ ¸å¿ƒçš„å°±æ˜¯metadata-configå‚æ•°äº†ã€‚</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">ä¾‹å­ï¼š</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">metadata-config:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  hosts: your es metadata cluster hosts</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  headers:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Authorization: &#x27;username password&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="å»ºè¡¨è¯¦è§£">å»ºè¡¨è¯¦è§£<a class="hash-link" href="#å»ºè¡¨è¯¦è§£" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="å»ºè¡¨è¯´æ˜">å»ºè¡¨è¯´æ˜<a class="hash-link" href="#å»ºè¡¨è¯´æ˜" title="Direct link to heading">â€‹</a></h3><p>å»ºè¡¨è¯­å¥ä¸­çš„å­—æ®µï¼Œæ—¶é—´å­—æ®µæ˜¯å¿…éœ€ï¼Œå¦‚è¡¨ä¸­çš„@timestampå­—æ®µï¼Œä½œä¸ºåœ¨kibanaåˆ›å»ºindex patternæ—¶çš„æ—¶é—´é€‰é¡¹ï¼Œå…¶å®ƒå­—æ®µæ ¹æ®æœ¬èº«ä¸šåŠ¡æŸ¥è¯¢æ¡ä»¶æŒ‰éœ€æ·»åŠ ã€‚</p><p>åŒ¹é…æ—¶é—´å­—æ®µçš„é€»è¾‘å¦‚ä¸‹ï¼Œæ»¡è¶³å…¶ä¸€å³å¯ï¼š</p><p><strong>1ï¼‰å­—æ®µä¸ºDateç±»å‹ï¼Œæ¯”å¦‚DateTime64ç±»å‹ï¼Œä¼šè¢«è®¤ä¸ºæ˜¯æ—¶é—´ç±»å‹</strong></p><p><strong>2ï¼‰æˆ–è€…å­—æ®µåä¸­åŒ…å«timeï¼Œæ¯”å¦‚ï¼ˆ<code>@timestamp</code> UInt64ï¼‰ï¼Œä¼šè¢«è®¤ä¸ºæ˜¯æ—¶é—´ç±»å‹</strong></p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªå»ºè¡¨è¯­å¥çš„ä¾‹å­</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">create database ckibana;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">use ckibana;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CREATE TABLE ckibana.table_local</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    `request_method` LowCardinality(String),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    `request_time` Float64,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    `http_host` String,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    `@timestamp` UInt64,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    `ck_assembly_extension` String,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    INDEX timestamp_index `@timestamp` TYPE minmax GRANULARITY 8192</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ENGINE = MergeTree</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">PARTITION BY (toYYYYMMDD(toDateTime(`@timestamp` / 1000, &#x27;Asia/Shanghai&#x27;)), toHour(toDateTime(`@timestamp` / 1000, &#x27;Asia/Shanghai&#x27;)))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ORDER BY (`http_host`)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SETTINGS in_memory_parts_enable_wal = 0, index_granularity = 8192;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CREATE TABLE IF NOT EXISTS ckibana.table_all AS ckibana.table_local ENGINE Distributed(&#x27;clickhouse_cluster&#x27;, ckibana, table_local, rand());</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>å½“è¦ä½¿ç”¨é‡‡æ ·åŠŸèƒ½æ—¶ï¼Œéœ€è¦åœ¨å»ºè¡¨è¯­å¥ä¸­ä¿®æ”¹<code>ORDER BYã€SAMPLE BY</code>è¯­å¥ï¼Œæ›´è¯¦ç»†å¯ä»¥å‚è€ƒ<a href="https://clickhouse.com/docs/en/sql-reference/statements/select/sample" target="_blank" rel="noopener noreferrer">clickhouseå®˜æ–¹è¯´æ˜</a> ã€‚</p><p>è¯´æ˜ï¼šé‡‡æ ·å­—æ®µå¯ä»¥æ˜¯è‡ªå·±å®šä¹‰çš„å­—æ®µï¼Œæ¨èè¿˜æ˜¯ä½¿ç”¨@timestampå­—æ®µä½œä¸ºé‡‡æ ·å­—æ®µï¼Œä¸ç”¨é¢å¤–åˆ›å»ºå­—æ®µ</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">create database ckibana;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">use ckibana;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CREATE TABLE ckibana.table_local</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    `request_method` LowCardinality(String),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    `request_time` Float64,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    `http_host` String,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    `@timestamp` UInt64,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    `ck_assembly_extension` String,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    INDEX timestamp_index `@timestamp` TYPE minmax GRANULARITY 8192</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ENGINE = MergeTree</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">PARTITION BY (toYYYYMMDD(toDateTime(`@timestamp` / 1000, &#x27;Asia/Shanghai&#x27;)), toHour(toDateTime(`@timestamp` / 1000, &#x27;Asia/Shanghai&#x27;)))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ORDER BY (`http_host`, intHash64(`@timestamp`))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SAMPLE BY intHash64(`@timestamp`)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SETTINGS in_memory_parts_enable_wal = 0, index_granularity = 8192;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CREATE TABLE IF NOT EXISTS ckibana.table_all AS ckibana.table_local ENGINE Distributed(&#x27;clickhouse_cluster&#x27;, ckibana, table_local, rand());</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="esçš„ç±»å‹-è·Ÿ-ckçš„ç±»å‹çš„mapping">esçš„ç±»å‹ è·Ÿ ckçš„ç±»å‹çš„mapping<a class="hash-link" href="#esçš„ç±»å‹-è·Ÿ-ckçš„ç±»å‹çš„mapping" title="Direct link to heading">â€‹</a></h3><h2 class="anchor anchorWithStickyNavbar_y2LR" id="ç›¸å…³ç³»ç»Ÿç´¢å¼•">ç›¸å…³ç³»ç»Ÿç´¢å¼•<a class="hash-link" href="#ç›¸å…³ç³»ç»Ÿç´¢å¼•" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="proxy-settings">proxy-settings<a class="hash-link" href="#proxy-settings" title="Direct link to heading">â€‹</a></h3><p>é»˜è®¤è¯¥ç´¢å¼•åä¸ºproxy-settingsï¼Œå¦‚æ‚¨ä½¿ç”¨ä¸€ä¸ªå…ƒæ•°æ®é›†ç¾¤æ¥ç®¡ç†å¤šä¸ªkibana proxyï¼Œå¯ä»¥åˆ©ç”¨application.ymlçš„<code>metadata.config.tingsSuffix</code>å±æ€§ã€‚</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="å‚æ•°è¯¦è§£">å‚æ•°è¯¦è§£<a class="hash-link" href="#å‚æ•°è¯¦è§£" title="Direct link to heading">â€‹</a></h4><p>æ›´æ–°ESå…ƒæ•°æ®é›†ç¾¤é…ç½®ï¼Œckibanaæä¾›å¦‚ä¸‹æ¥å£</p><p><strong>1ï¼‰æ›´æ–°CKé…ç½®ï¼Œä¸ä¼šç«‹å³ç”Ÿæ•ˆï¼Œéœ€è¦ç­‰ä¸€æ¬¡ä»»åŠ¡æ‰§è¡Œæ—¶é—´10s</strong></p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl --location --request POST &#x27;localhost:8080/config/updateCk?url=ip:Port&amp;user=yourUserName&amp;pass=yourPass&amp;defaultCkDatabase=yourCkDatabaseName&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>2ï¼‰æ›´æ–°ESé…ç½®ï¼Œä¸ä¼šç«‹å³ç”Ÿæ•ˆï¼Œéœ€è¦ç­‰ä¸€æ¬¡ä»»åŠ¡æ‰§è¡Œæ—¶é—´10s</strong></p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl --location --request POST &#x27;localhost:8080/config/updateEs?host=esHost&amp;headers=key:value,key2:value2&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>3ï¼‰æ›´æ–°ç™½åå•ç´¢å¼•</strong></p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl --location --request POST &#x27;localhost:8080/config/updateWhiteIndexList?list=index1,index2&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>4ï¼‰æ›´æ–°é»‘åå•ç´¢å¼•</strong></p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl --location --request POST &#x27;localhost:8080/config/updateBlackIndexList?list=index1,index2&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>5ï¼‰æ›´æ–°é‡‡æ ·ç´¢å¼•</strong></p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl --location --request POST &#x27;localhost:8080/config/updateSampleIndexList?list=index1,index2&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>6ï¼‰æ›´æ–°sampleCountMaxThreshold</strong></p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl --location --request POST &#x27;localhost:8080/config/updateSampleCountMaxThreshold?sampleCountMaxThreshold=1500000&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>7ï¼‰æ›´æ–°useCache</strong></p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl --location --request POST &#x27;localhost:8080/config/updateUseCache?useCache=true&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>8ï¼‰æ›´æ–°maxResultRow</strong></p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl --location --request POST &#x27;localhost:8080/config/updateMaxResultRow?maxResultRow=40000&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>9ï¼‰æ›´æ–°roundAbleMinPeriod</strong></p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl --location --request POST &#x27;localhost:8080/config/updateRoundAbleMinPeriod?roundAbleMinPeriod=120000&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>10ï¼‰æ›´æ–°round</strong></p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl --location --request POST &#x27;localhost:8080/config/updateRound?round=10&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>11ï¼‰æ›´æ–°maxTimeRange</strong></p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl --location --request POST &#x27;localhost:8080/config/updateMaxTimeRange?maxTimeRange=864000000&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>12ï¼‰æ›´æ–°enableMonitoring</strong></p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl --location --request POST &#x27;localhost:8080/config/updateEnableMonitoring?enableMonitoring=false&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>13ï¼‰æ›´æ–°msearchThreadPoolCoreSize</strong></p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl --location --request POST &#x27;localhost:8080/config/updateMsearchThreadPoolCoreSize?msearchThreadPoolCoreSize=4&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>14ï¼‰è·å–é…ç½®æ¥å£</strong></p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl --location &#x27;localhost:8080/config/all&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>15ï¼‰å…¨é‡æ›´æ–°é…ç½®æ¥å£</strong></p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl --location &#x27;localhost:8080/config/all&#x27; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--header &#x27;Content-Type: application/json&#x27; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--data &#x27;{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;query&quot;:{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;sampleIndexPatterns&quot;:[</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;index1&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;index2&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;sampleCountMaxThreshold&quot;:&quot;1500000&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;useCache&quot;:false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;proxy&quot;:{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;roundAbleMinPeriod&quot;:120000,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;maxTimeRange&quot;:86400000,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;enableMonitoring&quot;:true,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;blackIndexList&quot;:[</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;index1&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;index2&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;whiteIndexList&quot;:[</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;index1&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;index2&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;es&quot;:{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;host&quot;:&quot;esHost</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;headers&quot;:[</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;Authorization&quot;:&quot;yourEsClusterAuthorization&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            ]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;ck&quot;:{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;url&quot;:&quot;ip:Port&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;user&quot;:&quot;yourUserName&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;pass&quot;:&quot;yourPass&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;defaultCkDatabase&quot;:&quot;yourCkDatabaseName&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="proxy-monitor">proxy-monitor<a class="hash-link" href="#proxy-monitor" title="Direct link to heading">â€‹</a></h3><p>æä¾›ç›‘æ§ç´¢å¼•ã€‚å¯ä»¥é€šè¿‡é…ç½®æ‰“å¼€ã€‚</p><p>å¯åˆ©ç”¨è¯¥ç´¢å¼•è¿›è¡Œkibanaä¸Šçš„sqlç›‘æ§ã€‚</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="proxy-black-list">proxy-black-list<a class="hash-link" href="#proxy-black-list" title="Direct link to heading">â€‹</a></h3><p>ç´¢å¼•æŸ¥è¯¢sqlé»‘åå•ã€‚å¯ä»¥é€šè¿‡é…ç½®æ‰“å¼€ã€‚</p><p>è¯¥ç´¢å¼•å¯ä»¥é€šè¿‡kibana proxyç›´æ¥æ“ä½œï¼š</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="è·å–">è·å–<a class="hash-link" href="#è·å–" title="Direct link to heading">â€‹</a></h4><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl --location &#x27;http://localhost:8080/proxy/_black_list&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="æ–°å¢">æ–°å¢<a class="hash-link" href="#æ–°å¢" title="Direct link to heading">â€‹</a></h4><p>range: æŸ¥è¯¢é—´éš”ï¼ˆæ¯«ç§’ï¼‰</p><p>sql: å»é™¤æ—¶é—´èŒƒå›´çš„æ¡ä»¶æŸ¥è¯¢è¯­å¥ï¼Œå¯åœ¨monitoræ—¥å¿—ä¸­è·å–åˆ°</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl --location &#x27;http://localhost:8080/proxy/_black_list&#x27; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--header &#x27;Content-Type: application/json&#x27; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--data-raw &#x27;{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;range&quot;: &quot;900000&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;sql&quot;: &quot;((`@timestamp` = 1698293120000))&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="åˆ é™¤">åˆ é™¤<a class="hash-link" href="#åˆ é™¤" title="Direct link to heading">â€‹</a></h4><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl --location --request DELETE &#x27;http://localhost:8080/proxy/_black_list/{id}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="toc-wrapper" style="padding-inline-end:1rem;padding-inline-start:1rem"><h2>Contents</h2><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#applicationæ–‡ä»¶" class="table-of-contents__link toc-highlight">applicationæ–‡ä»¶</a></li><li><a href="#å»ºè¡¨è¯¦è§£" class="table-of-contents__link toc-highlight">å»ºè¡¨è¯¦è§£</a><ul><li><a href="#å»ºè¡¨è¯´æ˜" class="table-of-contents__link toc-highlight">å»ºè¡¨è¯´æ˜</a></li><li><a href="#esçš„ç±»å‹-è·Ÿ-ckçš„ç±»å‹çš„mapping" class="table-of-contents__link toc-highlight">esçš„ç±»å‹ è·Ÿ ckçš„ç±»å‹çš„mapping</a></li></ul></li><li><a href="#ç›¸å…³ç³»ç»Ÿç´¢å¼•" class="table-of-contents__link toc-highlight">ç›¸å…³ç³»ç»Ÿç´¢å¼•</a><ul><li><a href="#proxy-settings" class="table-of-contents__link toc-highlight">proxy-settings</a></li><li><a href="#proxy-monitor" class="table-of-contents__link toc-highlight">proxy-monitor</a></li><li><a href="#proxy-black-list" class="table-of-contents__link toc-highlight">proxy-black-list</a></li></ul></li></ul></div></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/TongchengOpenSource/ckibana/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Github Issues<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://tongchengopensource.github.io/ckibana-docs" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>CKibana Documentation<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/TongchengOpenSource/ckibana" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2024 TongchengOpenSource</div></div></div></footer></div>
<script src="/ckibana-docs/assets/js/runtime~main.8602d1de.js"></script>
<script src="/ckibana-docs/assets/js/main.ba6bb3d8.js"></script>
</body>
</html>