"use strict";(self.webpackChunkdocusaurus_docs=self.webpackChunkdocusaurus_docs||[]).push([[199],{3905:function(e,n,t){t.d(n,{Zo:function(){return l},kt:function(){return p}});var r=t(7294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var s=r.createContext({}),u=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},l=function(e){var n=u(e.components);return r.createElement(s.Provider,{value:n},e.children)},f={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},g=r.forwardRef((function(e,n){var t=e.components,i=e.mdxType,a=e.originalType,s=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),g=u(t),p=i,d=g["".concat(s,".").concat(p)]||g[p]||f[p]||a;return t?r.createElement(d,o(o({ref:n},l),{},{components:t})):r.createElement(d,o({ref:n},l))}));function p(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var a=t.length,o=new Array(a);o[0]=g;var c={};for(var s in n)hasOwnProperty.call(n,s)&&(c[s]=n[s]);c.originalType=e,c.mdxType="string"==typeof e?e:i,o[1]=c;for(var u=2;u<a;u++)o[u]=t[u];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}g.displayName="MDXCreateElement"},4327:function(e,n,t){t.r(n),t.d(n,{contentTitle:function(){return s},default:function(){return g},frontMatter:function(){return c},metadata:function(){return u},toc:function(){return l}});var r=t(7462),i=t(3366),a=(t(7294),t(3905)),o=["components"],c={sidebar_position:2},s="usercase",u={unversionedId:"UserCase",id:"UserCase",title:"usercase",description:"1\u3001Accessing the native Kibana.",source:"@site/docs/en/UserCase.md",sourceDirName:".",slug:"/UserCase",permalink:"/ckibana-docs/zh/en/UserCase",editUrl:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",next:{title:"api-docs",permalink:"/ckibana-docs/zh/en/api-docs"}},l=[{value:"1\u3001Accessing the native Kibana.",id:"1accessing-the-native-kibana",children:[],level:2},{value:"2\u3001Changing Kibana configuration to connect to CKibana.",id:"2changing-kibana-configuration-to-connect-to-ckibana",children:[],level:2},{value:"3\u3001Configuration for starting CKibana",id:"3configuration-for-starting-ckibana",children:[],level:2},{value:"4\u3001Configuring the ClickHouse connection information in CKibana.",id:"4configuring-the-clickhouse-connection-information-in-ckibana",children:[],level:2},{value:"5\u3001Configuring an <code>index pattern</code>.",id:"5configuring-an-index-pattern",children:[],level:2},{value:"6\u3001Performing a query",id:"6performing-a-query",children:[],level:2},{value:"7\u3001Enable Sampling",id:"7enable-sampling",children:[],level:2},{value:"8\u3001Enable query monitoring",id:"8enable-query-monitoring",children:[],level:2},{value:"9\u3001Configure round time",id:"9configure-round-time",children:[],level:2},{value:"10\u3001Enable query cache",id:"10enable-query-cache",children:[],level:2}],f={toc:l};function g(e){var n=e.components,c=(0,i.Z)(e,o);return(0,a.kt)("wrapper",(0,r.Z)({},f,c,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"usercase"},"usercase"),(0,a.kt)("h2",{id:"1accessing-the-native-kibana"},"1\u3001Accessing the native Kibana."),(0,a.kt)("p",null,(0,a.kt)("img",{src:t(1).Z})),(0,a.kt)("h2",{id:"2changing-kibana-configuration-to-connect-to-ckibana"},"2\u3001Changing Kibana configuration to connect to CKibana."),(0,a.kt)("p",null,(0,a.kt)("img",{src:t(28).Z})),(0,a.kt)("h2",{id:"3configuration-for-starting-ckibana"},"3\u3001Configuration for starting CKibana"),(0,a.kt)("p",null,(0,a.kt)("img",{src:t(699).Z})),(0,a.kt)("h2",{id:"4configuring-the-clickhouse-connection-information-in-ckibana"},"4\u3001Configuring the ClickHouse connection information in CKibana."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"curl --location --request POST 'localhost:8080/config/updateCk?url=ckUrl&user=default&pass=default&defaultCkDatabase=ops'\n")),(0,a.kt)("h2",{id:"5configuring-an-index-pattern"},"5\u3001Configuring an ",(0,a.kt)("inlineCode",{parentName:"h2"},"index pattern"),"."),(0,a.kt)("p",null,(0,a.kt)("img",{src:t(3102).Z})),(0,a.kt)("h2",{id:"6performing-a-query"},"6\u3001Performing a query"),(0,a.kt)("p",null,(0,a.kt)("img",{src:t(5739).Z})),(0,a.kt)("h2",{id:"7enable-sampling"},"7\u3001Enable Sampling"),(0,a.kt)("p",null,"When the data volume is relatively large, turn on sampling can effectively improve the query performance. Note: If the sampling threshold is set too low, the restored trend graph will be different from the real one."),(0,a.kt)("h2",{id:"8enable-query-monitoring"},"8\u3001Enable query monitoring"),(0,a.kt)("p",null,"You can monitor what syntaxes are being queried right now, and with the blacklist feature, you can effectively alleviate the problem of clickhouse resources being too high due to improper usage."),(0,a.kt)("p",null,(0,a.kt)("img",{src:t(1467).Z}),"\nUsing monitoring metrics, you can make charts and graphs to increase observability."),(0,a.kt)("p",null,"For example, the time consumed for each query:\n",(0,a.kt)("img",{src:t(5374).Z})),(0,a.kt)("h2",{id:"9configure-round-time"},"9\u3001Configure round time"),(0,a.kt)("p",null,"You can round fetch the time, which works well with query caching to improve performance."),(0,a.kt)("p",null,"Common case, kibana inside a group of users in the query the same question, when the query conditions are highly consistent, configure round can be very good to ease the pressure of ClickHouse."),(0,a.kt)("h2",{id:"10enable-query-cache"},"10\u3001Enable query cache"),(0,a.kt)("p",null,"When the query statement is consistent with the query time, the later query can hit the es cache very well, relieving the pressure on clickhouse."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"query.useCache: true\n")),(0,a.kt)("p",null,(0,a.kt)("img",{src:t(879).Z}),"\nIt can be seen that a hit to cache takes only 2ms, and 80ms in the case of no hit. This configuration is turned off by default, but we recommend turning it on as well.\nUsing Elasticsearch as the underlying storage medium, of course, the storage cost will be correspondingly higher, you need to maintain the proxy-cache index life cycle to regularly clean up the cold data."))}g.isMDXComponent=!0},1:function(e,n,t){n.Z=t.p+"assets/images/usercase01-2eb4a8098af7bf5365ab61f194fdb7f0.png"},28:function(e,n,t){n.Z=t.p+"assets/images/usercase02-402aca28049f76e78812ad0b13f67608.png"},699:function(e,n,t){n.Z=t.p+"assets/images/usercase03-67cf696a9343595bd9ef30c0161e653c.png"},3102:function(e,n,t){n.Z=t.p+"assets/images/usercase04-5e163c04660ca304d26de671f9dc0c80.png"},5739:function(e,n,t){n.Z=t.p+"assets/images/usercase05-b9728f12052221040e7031718ac857cf.png"},5374:function(e,n,t){n.Z=t.p+"assets/images/usercase08-1-de9c5e255facbff06305370595678578.png"},1467:function(e,n,t){n.Z=t.p+"assets/images/usercase08-d312453402e0c1f34128608389d2338d.png"},879:function(e,n,t){n.Z=t.p+"assets/images/usercase10-4ae58f1dcb9d13ce2022fbb94b3b3043.png"}}]);