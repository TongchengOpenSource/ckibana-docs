<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<title data-react-helmet="true">api-docs | 𝑪𝑲𝒊𝒃𝒂𝒏𝒂</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="http://CKibana.inf.17usoft.com/docs//ckibana-docs/en/api-docs"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-en-current"><meta data-react-helmet="true" property="og:title" content="api-docs | 𝑪𝑲𝒊𝒃𝒂𝒏𝒂"><meta data-react-helmet="true" name="description" content="application.yaml"><meta data-react-helmet="true" property="og:description" content="application.yaml"><link data-react-helmet="true" rel="shortcut icon" href="/ckibana-docs/img/logo.svg"><link data-react-helmet="true" rel="canonical" href="http://CKibana.inf.17usoft.com/docs//ckibana-docs/en/api-docs"><link data-react-helmet="true" rel="alternate" href="http://CKibana.inf.17usoft.com/docs//ckibana-docs/en/api-docs" hreflang="en"><link data-react-helmet="true" rel="alternate" href="http://CKibana.inf.17usoft.com/docs//ckibana-docs/en/api-docs" hreflang="x-default"><link rel="stylesheet" href="/ckibana-docs/assets/css/styles.16cd582e.css">
<link rel="preload" href="/ckibana-docs/assets/js/runtime~main.a54cb956.js" as="script">
<link rel="preload" href="/ckibana-docs/assets/js/main.39ebe0cd.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/ckibana-docs/"><div class="navbar__logo"><img src="/ckibana-docs/img/ckibana-new.svg" alt="Site Logo" class="themedImage_TMUO themedImage--light_4Vu1" height="32" width="32"><img src="/ckibana-docs/img/ckibana-new.svg" alt="Site Logo" class="themedImage_TMUO themedImage--dark_uzRr" height="32" width="32"></div><b class="navbar__title">𝑪𝑲𝒊𝒃𝒂𝒏𝒂</b></a></div><div class="navbar__items navbar__items--right"><div class="navbar__search searchBarContainer_I7kZ"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_Zg7X searchBarLoadingRing_J5Ez"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_CDc6"><kbd class="searchHint_2RRg">ctrl</kbd><kbd class="searchHint_2RRg">K</kbd></div></div><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">🌜</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">🌞</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ckibana-docs/en/UserCase">usercase</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/ckibana-docs/en/api-docs">api-docs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ckibana-docs/en/troubleshooting">troubleshooting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ckibana-docs/en/">Introduce</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div style="position:relative" class="col docItemCol_MGa7"><div style="width:100%"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_psec"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>api-docs</h1></header><h2 class="anchor anchorWithStickyNavbar_y2LR" id="applicationyaml">application.yaml<a aria-hidden="true" class="hash-link" href="#applicationyaml" title="Direct link to heading">​</a></h2><p>This file contains some basic configurations such as ports, logging, etc. The core parameter is the <code>metadata-config</code> parameter.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">eg：</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">metadata-config:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  hosts: your es metadata cluster hosts</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  headers:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Authorization: &#x27;username password&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="detailed-explanation-of-table-creation">Detailed explanation of table creation<a aria-hidden="true" class="hash-link" href="#detailed-explanation-of-table-creation" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="table-creation-instructions">Table creation instructions<a aria-hidden="true" class="hash-link" href="#table-creation-instructions" title="Direct link to heading">​</a></h3><p>The time field is required in the table creation statement, such as the <code>@timestamp</code> field in the table, which is used as the time option when creating an index pattern in Kibana. Other fields should be added as needed based on the query conditions of the business itself.</p><p>The logic of matching time field is as follows, just satisfy one of them:</p><p><strong>1）Fields of type Date, such as DateTime64, will be recognized as time fields.</strong></p><p><strong>2）Alternatively, if the field name contains &quot;time&quot;, such as (@timestamp UInt64), it will be recognized as a time field.</strong></p><p>Here is an example of a table creation statement.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">create database ckibana;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">use ckibana;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CREATE TABLE ckibana.table_local</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    `request_method` LowCardinality(String),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    `request_time` Float64,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    `http_host` String,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    `@timestamp` UInt64,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    `ck_assembly_extension` String,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    INDEX timestamp_index `@timestamp` TYPE minmax GRANULARITY 8192</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ENGINE = MergeTree</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">PARTITION BY (toYYYYMMDD(toDateTime(`@timestamp` / 1000, &#x27;Asia/Shanghai&#x27;)), toHour(toDateTime(`@timestamp` / 1000, &#x27;Asia/Shanghai&#x27;)))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ORDER BY (`http_host`)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SETTINGS in_memory_parts_enable_wal = 0, index_granularity = 8192;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CREATE TABLE IF NOT EXISTS ckibana.table_all AS ckibana.table_local ENGINE Distributed(&#x27;clickhouse_cluster&#x27;, ckibana, table_local, rand());</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>When using the sampling feature, you need to modify the ORDER BY and SAMPLE BY statements in the table creation statement. For more details, please refer to the following resources:<a href="https://clickhouse.com/docs/en/sql-reference/statements/select/sample" target="_blank" rel="noopener noreferrer">clickhouse doc</a> 。</p><p>Note that the sampling field can be a user-defined field, It is recommended to use the @timestamp field as the sampling field instead of creating an additional field.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">create database ckibana;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">use ckibana;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CREATE TABLE ckibana.table_local</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    `request_method` LowCardinality(String),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    `request_time` Float64,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    `http_host` String,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    `@timestamp` UInt64,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    `ck_assembly_extension` String,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    INDEX timestamp_index `@timestamp` TYPE minmax GRANULARITY 8192</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ENGINE = MergeTree</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">PARTITION BY (toYYYYMMDD(toDateTime(`@timestamp` / 1000, &#x27;Asia/Shanghai&#x27;)), toHour(toDateTime(`@timestamp` / 1000, &#x27;Asia/Shanghai&#x27;)))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ORDER BY (`http_host`, intHash64(`@timestamp`))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SAMPLE BY intHash64(`@timestamp`)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SETTINGS in_memory_parts_enable_wal = 0, index_granularity = 8192;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CREATE TABLE IF NOT EXISTS ckibana.table_all AS ckibana.table_local ENGINE Distributed(&#x27;clickhouse_cluster&#x27;, ckibana, table_local, rand());</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="es-data-types-and-ck-data-types-mapping">ES data types and CK data types mapping:<a aria-hidden="true" class="hash-link" href="#es-data-types-and-ck-data-types-mapping" title="Direct link to heading">​</a></h3><h2 class="anchor anchorWithStickyNavbar_y2LR" id="system-indexes">system indexes.<a aria-hidden="true" class="hash-link" href="#system-indexes" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="proxy-settings">proxy-settings<a aria-hidden="true" class="hash-link" href="#proxy-settings" title="Direct link to heading">​</a></h3><p>By default, the index name for this is <code>proxy-settings</code>.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="detailed-explanation-of-parameters">Detailed explanation of parameters<a aria-hidden="true" class="hash-link" href="#detailed-explanation-of-parameters" title="Direct link to heading">​</a></h4><p>To update the Elasticsearch metadata cluster configuration, the following interface is provided by CKibana.</p><p><strong>1）Updating ClickHouse configuration，It will not take effect immediately. You need to wait for 10 seconds for the task to be executed.</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl --location --request POST &#x27;localhost:8080/config/updateCk?url=ip:Port&amp;user=yourUserName&amp;pass=yourPass&amp;defaultCkDatabase=yourCkDatabaseName&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>2）Updating Elasticsearch configuration，It will not take effect immediately. You need to wait for 10 seconds for the task to be executed.</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl --location --request POST &#x27;localhost:8080/config/updateEs?host=esHost&amp;headers=key:value,key2:value2&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>3）Updating whitelist index</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl --location --request POST &#x27;localhost:8080/config/updateWhiteIndexList?list=index1,index2&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>4）Updating blacklist index</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl --location --request POST &#x27;localhost:8080/config/updateBlackIndexList?list=index1,index2&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>5）Updating sampling index</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl --location --request POST &#x27;localhost:8080/config/updateSampleIndexList?list=index1,index2&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>6）Updating sampleCountMaxThreshold</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl --location --request POST &#x27;localhost:8080/config/updateSampleCountMaxThreshold?sampleCountMaxThreshold=1500000&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>7）Updating useCache</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl --location --request POST &#x27;localhost:8080/config/updateUseCache?useCache=true&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>8）Updating roundAbleMinPeriod</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl --location --request POST &#x27;localhost:8080/config/updateRoundAbleMinPeriod?roundAbleMinPeriod=120000&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>9）Updating round</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl --location --request POST &#x27;localhost:8080/config/updateRound?round=10&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>10）Updating maxTimeRange</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl --location --request POST &#x27;localhost:8080/config/updateMaxTimeRange?maxTimeRange=864000000&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>11）Updating enableMonitoring</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl --location --request POST &#x27;localhost:8080/config/updateEnableMonitoring?enableMonitoring=false&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>12）Updating msearchThreadPoolCoreSize</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl --location --request POST &#x27;localhost:8080/config/updateMsearchThreadPoolCoreSize?msearchThreadPoolCoreSize=4&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>13）Get configuration</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl --location &#x27;localhost:8080/config/all&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>14）Full update configuration interface</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl --location &#x27;localhost:8080/config/all&#x27; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--header &#x27;Content-Type: application/json&#x27; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--data &#x27;{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;query&quot;:{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;sampleIndexPatterns&quot;:[</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;index1&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;index2&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;sampleCountMaxThreshold&quot;:&quot;1500000&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;useCache&quot;:false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;proxy&quot;:{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;roundAbleMinPeriod&quot;:120000,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;maxTimeRange&quot;:86400000,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;enableMonitoring&quot;:true,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;blackIndexList&quot;:[</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;index1&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;index2&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;whiteIndexList&quot;:[</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;index1&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;index2&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;es&quot;:{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;host&quot;:&quot;esHost</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;headers&quot;:[</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;Authorization&quot;:&quot;yourEsClusterAuthorization&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            ]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;ck&quot;:{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;url&quot;:&quot;ip:Port&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;user&quot;:&quot;yourUserName&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;pass&quot;:&quot;yourPass&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;defaultCkDatabase&quot;:&quot;yourCkDatabaseName&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="proxy-monitor">proxy-monitor<a aria-hidden="true" class="hash-link" href="#proxy-monitor" title="Direct link to heading">​</a></h3><p>Provide monitoring index. Can be enabled through configuration.</p><p>This index can be used for SQL monitoring on Kibana.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="proxy-black-list">proxy-black-list<a aria-hidden="true" class="hash-link" href="#proxy-black-list" title="Direct link to heading">​</a></h3><p>Index query SQL blacklist. Can be enabled through configuration.</p><p>This index can be directly operated through Kibana proxy：</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="get">GET<a aria-hidden="true" class="hash-link" href="#get" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl --location &#x27;http://localhost:8080/proxy/_black_list&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="insert">Insert<a aria-hidden="true" class="hash-link" href="#insert" title="Direct link to heading">​</a></h4><p>range: Query interval (in milliseconds)</p><p>sql: Query statement with time range exclusion. Can be obtained in monitor logs.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl --location &#x27;http://localhost:8080/proxy/_black_list&#x27; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--header &#x27;Content-Type: application/json&#x27; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--data-raw &#x27;{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;range&quot;: &quot;900000&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;sql&quot;: &quot;((`@timestamp` = 1698293120000))&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="delete">Delete<a aria-hidden="true" class="hash-link" href="#delete" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl --location --request DELETE &#x27;http://localhost:8080/proxy/_black_list/{id}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/ckibana-docs/en/UserCase"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« <!-- -->usercase</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/ckibana-docs/en/troubleshooting"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">troubleshooting<!-- --> »</div></a></div></nav></div></div><div class="col col--3"><div class="toc-wrapper" style="padding-inline-end:1rem;padding-inline-start:1rem"><h2>Contents</h2><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#applicationyaml" class="table-of-contents__link toc-highlight">application.yaml</a></li><li><a href="#detailed-explanation-of-table-creation" class="table-of-contents__link toc-highlight">Detailed explanation of table creation</a><ul><li><a href="#table-creation-instructions" class="table-of-contents__link toc-highlight">Table creation instructions</a></li><li><a href="#es-data-types-and-ck-data-types-mapping" class="table-of-contents__link toc-highlight">ES data types and CK data types mapping:</a></li></ul></li><li><a href="#system-indexes" class="table-of-contents__link toc-highlight">system indexes.</a><ul><li><a href="#proxy-settings" class="table-of-contents__link toc-highlight">proxy-settings</a></li><li><a href="#proxy-monitor" class="table-of-contents__link toc-highlight">proxy-monitor</a></li><li><a href="#proxy-black-list" class="table-of-contents__link toc-highlight">proxy-black-list</a></li></ul></li></ul></div></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/TongchengOpenSource/ckibana/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Github Issues<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://tongchengopensource.github.io/ckibana-docs" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>CKibana Documentation<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/TongchengOpenSource/ckibana" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 TongchengOpenSource</div></div></div></footer></div>
<script src="/ckibana-docs/assets/js/runtime~main.a54cb956.js"></script>
<script src="/ckibana-docs/assets/js/main.39ebe0cd.js"></script>
</body>
</html>