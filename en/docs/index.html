<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/ckibana-docs/en/blog/rss.xml" title="𝑪𝑲𝒊𝒃𝒂𝒏𝒂 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/ckibana-docs/en/blog/atom.xml" title="𝑪𝑲𝒊𝒃𝒂𝒏𝒂 Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/ckibana-docs/zh/blog/rss.xml" title="𝑪𝑲𝒊𝒃𝒂𝒏𝒂 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/ckibana-docs/zh/blog/atom.xml" title="𝑪𝑲𝒊𝒃𝒂𝒏𝒂 Atom Feed"><title data-react-helmet="true">Introduce | 𝑪𝑲𝒊𝒃𝒂𝒏𝒂</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="http://CKibana.inf.17usoft.com/docs//ckibana-docs/en/docs/"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-en-current"><meta data-react-helmet="true" property="og:title" content="Introduce | 𝑪𝑲𝒊𝒃𝒂𝒏𝒂"><meta data-react-helmet="true" name="description" content="License"><meta data-react-helmet="true" property="og:description" content="License"><link data-react-helmet="true" rel="icon" href="/ckibana-docs/img/logo.svg"><link data-react-helmet="true" rel="canonical" href="http://CKibana.inf.17usoft.com/docs//ckibana-docs/en/docs/"><link data-react-helmet="true" rel="alternate" href="http://CKibana.inf.17usoft.com/docs//ckibana-docs/en/docs/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="http://CKibana.inf.17usoft.com/docs//ckibana-docs/en/docs/" hreflang="x-default"><link rel="stylesheet" href="/ckibana-docs/assets/css/styles.56a1642d.css">
<link rel="preload" href="/ckibana-docs/assets/js/runtime~main.35903492.js" as="script">
<link rel="preload" href="/ckibana-docs/assets/js/main.f7f2c358.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/ckibana-docs/"><div class="navbar__logo"><img src="/ckibana-docs/img/ckibana-new.svg" alt="Site Logo" class="themedImage_TMUO themedImage--light_4Vu1" height="32" width="32"><img src="/ckibana-docs/img/ckibana-new.svg" alt="Site Logo" class="themedImage_TMUO themedImage--dark_uzRr" height="32" width="32"></div><b class="navbar__title">𝑪𝑲𝒊𝒃𝒂𝒏𝒂</b></a></div><div class="navbar__items navbar__items--right"><div class="navbar__search searchBarContainer_I7kZ"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_Zg7X searchBarLoadingRing_J5Ez"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_CDc6"><kbd class="searchHint_2RRg">ctrl</kbd><kbd class="searchHint_2RRg">K</kbd></div></div><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">🌜</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">🌞</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ckibana-docs/en/docs/UserCase">usercase</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ckibana-docs/en/docs/api-docs">api-docs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ckibana-docs/en/docs/troubleshooting">troubleshooting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/ckibana-docs/en/docs/">Introduce</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div style="position:relative" class="col docItemCol_MGa7"><div style="width:100%"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_psec"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Introduce</h1></header><p><a href="https://opensource.org/licenses/Apache-2.0" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/badge/License-Apache%202.0-blue.svg" alt="License"></a>
<a href="https://github.com/TongchengOpenSource/ckibana/releases" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/github/release/TongchengOpenSource/ckibana.svg?color=brightgreen&amp;label=Release" alt="Release"></a></p><p><strong>ClickHouse adapter/proxy for Kibana</strong></p><p><strong>ClickHouse visualization tool</strong></p><p>CKibana is a service for convenient analysis of ClickHouse data using native Kibana.</p><p>A typical use case is when nginx log storage is migrated from ElasticSearch to ClickHouse,users can seamlessly continue their log query and analysis with Kibana.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="features">Features<a class="hash-link" href="#features" title="Direct link to heading">​</a></h2><ul><li>Version Support: Compatible with ElasticSearch and Kibana versions 6.x, 7.x, and 8.x.</li><li>Syntax Support: Compatible with common ElasticSearch syntax (note: ip_range and date_range can only be queried using the querystring syntax in the search box).</li><li>Sampling Function: For queries with hit results exceeding the threshold, it supports dynamic calculation of sampling and result restoration to improve query performance and ensure that the basic trend of the chart is consistent with the real data trend (the larger the flow control threshold, the closer the real chart trend is).</li><li>Cache Function: Supports using ElasticSearch to cache results to improve the performance of repeated queries.</li><li>Time Round Function: Supports rounding query time, for example, round 20 seconds (example: if the query time is in seconds 0-19, it will automatically round to 0; if it is in seconds 20-39, it will automatically round to 20 seconds, for example, if the query time is from 01:50:15 to 05:52:47, it will automatically adjust to 01:50:00 to 05:52:40). Used in conjunction with the cache function, it can effectively alleviate the pressure on ClickHouse caused by concurrent queries of the same statement by multiple users.</li><li>Blacklist Function: Supports setting a blacklist to prevent complex statements from causing pressure on ClickHouse.</li><li>Query Template Function: Supports syntax monitoring after removing time to facilitate quick problem location. Used in conjunction with the blacklist function, it can effectively ensure the stability of ClickHouse.</li><li>Query Circuit Breaker: Supports advanced features such as configuring the maximum query time range.</li></ul><h4 class="anchor anchorWithStickyNavbar_y2LR" id="supported-aggregation-syntax">Supported Aggregation Syntax:<a class="hash-link" href="#supported-aggregation-syntax" title="Direct link to heading">​</a></h4><h2 class="anchor anchorWithStickyNavbar_y2LR" id="get-started">Get started<a class="hash-link" href="#get-started" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="quick-start">quick start<a class="hash-link" href="#quick-start" title="Direct link to heading">​</a></h3><p>To quickly experience Kibana, you can deploy it quickly using docker-compose.</p><p><a href="https://github.com/TongchengOpenSource/ckibana/blob/main/docker-compose/README.md" target="_blank" rel="noopener noreferrer">ckibana-quick-start-doc</a></p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Enter the docker-compose directory.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> ckibana/docker-compose</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Deploy</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">docker-compose</span><span class="token plain"> up -d</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>After deployment is complete, access Kibana in a browser at： <a href="http://127.0.0.1:5601/" target="_blank" rel="noopener noreferrer">http://127.0.0.1:5601/</a></p><p>A process with built-in mock data has been included. After importing the Kibana configuration file (dashboard, index-pattern, etc.), you can start experiencing it!</p><p>Configuration file path：docker-compose/quickstart-export.json
<img src="/ckibana-docs/assets/images/dashboard-import-57535ddd5204d4c2029f1e4499ee1e03.jpg">
Effect display：
<img src="/ckibana-docs/assets/images/dashboard-653023ff597452162127fb4b0c1328fe.jpg"></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="local-run-ckibana">Local run CKibana<a class="hash-link" href="#local-run-ckibana" title="Direct link to heading">​</a></h3><p>CKibana can be run on all major operating systems and requires Java JDK version 17 or higher to be installed. To check, please run:<code>java -version</code>:</p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ java -version</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">java version </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;17.0.5&quot;</span><span class="token plain"> </span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The proxy service depends on the <strong>ES, CK, and Kibana services</strong>, which need to be prepared in advance. The following steps only include querying data from CK and do not include writing data to CK.</p><p><strong>1）Create a database and a table</strong></p><p>To initialize database and table structures in ClickHouse, please refer to:<a href="https://github.com/TongchengOpenSource/ckibana-docs/blob/main/api-docs.md" target="_blank" rel="noopener noreferrer">api-docs</a> Detailed explanation of creating a table</p><p><strong>2）Start CKibana</strong></p><p>To modify the ES configuration in CKibana, you need to change it to your own ES information. The configuration file path is <code>src/main/resources/application.yml</code></p><div class="codeBlockContainer_J+bg language-yaml theme-code-block"><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">metadata-config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">hosts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> your es metadata cluster hosts</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">headers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">headerKey</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> yourHeaderValue</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Package and run or run locally directly <code>com.ly.ckibana.Bootstrap</code></p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">### start ckibana</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">nohup</span><span class="token plain"> java -jar ckibana.jar </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> run.out </span><span class="token operator file-descriptor important" style="color:rgb(137, 221, 255)">2</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token file-descriptor important">&amp;1</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">### check whether ckibana is successfully started</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">tail</span><span class="token plain"> -f ~/logs/app.log</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Tomcat started on port</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">s</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">: </span><span class="token number" style="color:rgb(247, 140, 108)">8080</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">http</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> with context path </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Started Bootstrap </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1.474</span><span class="token plain"> seconds</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>3）start kibana</strong></p><p>Configure the elasticsearchHosts parameter in Kibana to the CKibana proxy address, so that it can be routed to the proxy service.</p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">eg：elasticsearchHosts</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">http://ip:port</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>4）Configure the index pattern whitelist</strong></p><p>Only after configuring the corresponding whitelist can you proceed to create it in the next step <code>index pattern</code>，<strong>The configured whitelist needs to be consistent with the table name</strong>，please refer to:<a href="https://github.com/TongchengOpenSource/ckibana-docs/blob/main/api-docs.md" target="_blank" rel="noopener noreferrer">api-docs</a> Update the whitelist index interface</p><p><strong>5）Create <code>index pattern</code> in Kibana</strong></p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">eg：If the CK table name is </span><span class="token variable" style="color:rgb(191, 199, 213)">`</span><span class="token variable" style="color:rgb(191, 199, 213)">table_test</span><span class="token variable" style="color:rgb(191, 199, 213)">`</span><span class="token plain">, </span><span class="token keyword" style="font-style:italic">then</span><span class="token plain"> create an index pattern </span><span class="token variable" style="color:rgb(191, 199, 213)">`</span><span class="token variable" style="color:rgb(191, 199, 213)">table_test</span><span class="token variable" style="color:rgb(191, 199, 213)">`</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>After completing the above 5 steps, you can create a dashboard and start using it.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="todo">TODO<a class="hash-link" href="#todo" title="Direct link to heading">​</a></h2><ul><li>Segmented query: Supports automatically splitting query time, which can fully utilize the cache and improve query performance.</li><li>IDS query: Currently v8 version of several places do not support data Json display and Doc View, for example: Json, Single document, Surrounding documents and so on.</li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="license">License<a class="hash-link" href="#license" title="Direct link to heading">​</a></h2><p><a href="http://www.apache.org/licenses/LICENSE-2.0.html" target="_blank" rel="noopener noreferrer">Apache License, Version 2.0</a> Copyright (C) Apache Software Foundation</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="toc-wrapper" style="padding-inline-end:1rem;padding-inline-start:1rem"><h2>Contents</h2><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#features" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#get-started" class="table-of-contents__link toc-highlight">Get started</a><ul><li><a href="#quick-start" class="table-of-contents__link toc-highlight">quick start</a></li><li><a href="#local-run-ckibana" class="table-of-contents__link toc-highlight">Local run CKibana</a></li></ul></li><li><a href="#todo" class="table-of-contents__link toc-highlight">TODO</a></li><li><a href="#license" class="table-of-contents__link toc-highlight">License</a></li></ul></div></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/TongchengOpenSource/ckibana/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Github Issues<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://tongchengopensource.github.io/ckibana-docs" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>CKibana Documentation<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/TongchengOpenSource/ckibana" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 TongchengOpenSource</div></div></div></footer></div>
<script src="/ckibana-docs/assets/js/runtime~main.35903492.js"></script>
<script src="/ckibana-docs/assets/js/main.f7f2c358.js"></script>
</body>
</html>